<div class="col-sm-1"></div>
<div class="col-sm-10">
  <div class="panel panel-primary">
  <div class="panel-heading">
    <h3 class="panel-title">Listing Ideals</h3>
  </div>
  <% if (@posts.count == 0) %>
    <p>There are no post to show.</p>
  <% else %>
      <table class="table table-striped table-hover table-bordered table-responsive ">
        <thead>
          <tr>
            <th>Title</th>
            <th>Sharewith</th>
            <th>View</th>
            <th>Status</th>
            <th>Vote</th>
            <% if params[:user_id] == nil %>
            <th>Action</th>
            <% end %>
          </tr>
        </thead>
        <tbody>
          <% @posts.each do |post| %>
            <tr>
              <td><a href="<%= posts_path %>/<%= post.id %>"><%= post.title.truncate(60, separator: ' ') %></a></td>
              <td><%= post.sharewith_text %></td>
              <td><%= post.view %></td>
              <td>
                <span class="label label-<% if (post.status == -1) %><%= 'default' %><% elsif (post.status == 0) %><%= 'danger' %><% else %><%= 'success' %><% end %>">
                  <%= post.status_text %>
                </span>
                </td>
              <td>
                <% if post.votes.average(:rate) == nil %>
                  N/A
                <% else %>
                  <%= post.votes.average(:rate) %>
                <% end %>
              </td>
              <% if params[:user_id] == nil %>
              <td>
              <%= link_to 'Edit', edit_post_path(post), class: "btn btn-xs btn-default" %>
              <%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-xs btn-danger" %>
              </td>
              <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% end %>
</div>

<% if params[:user_id] == nil %>
  <%= button_to 'New Post', new_post_path, class: "btn btn-success", method: "get" %>
<% else %>
  <%= link_to 'Back', users_path %>
<% end %>

</div>
