<p id="notice"><%= notice %></p>

<p>
  <strong>Title:</strong>
  <%= @post.title %>
</p>

<p>
  <strong>Content:</strong>
  <%= @post.content %>
</p>

<p>
  <strong>Sharewith:</strong>
  <%= @post.sharewith_text %>
</p>

<p>
  <strong>View:</strong>
  <%= @post.view %>
</p>

<p>
  <strong>Status:</strong>
  <%= @post.status_text %>
</p>

<p>
  <strong>User:</strong>
  <%= @post.user.fullname %>
</p>

<p>
  <strong>Vote: </strong><%= @post.votes.count %>
  <strong>Rate: </strong><%= @post.votes.average(:rate) %>
</p>
<% if (session[:user_id] != @post.user_id) %>
  <p>
    <strong>Your vote is: </strong>
    <%= form_for([@post, @post.votes.build]) do |f| %>
      <%= f.select :rate, options_for_select([1, 2, 3, 4, 5]) %>
      <%= f.hidden_field :user_id, value: session[:user_id] %>
      <%= f.hidden_field :post_id, value: @post.id %>
      <%= f.submit ("Vote") %>
    <% end %>
  </p>
<% end %>
<% if @post.comments.count > 0 %>
  <% @post.comments.each do |comment| %>    
    <p> Content:  <%= comment.content %> </p>
    <span>===================================</span>
  <% end %>
<% end %>

<h2>Write comment for this post:</h2>
<%= form_for([@post, @post.comments.new]) do |f| %>
  <p> 
    <%= f.text_area :content, size: "32x6" %>
    <%= f.hidden_field :status, value: "1" %>
    <%= f.hidden_field :post_id, value: @post.id %>
    <%= f.hidden_field :user_id, value: session[:user_id]  %>
  </p>
    
  <p>
    <%= f.submit ("Post Comment") %>
  </p>
  
<% end %>

<br>
<%= link_to 'Edit', edit_post_path(@post) %> |
<%= link_to 'Back', posts_path %>